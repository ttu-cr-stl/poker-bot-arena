app = "poker-bot-arena-tournament"

primary_region = "iad"
kill_signal = "SIGINT"
kill_timeout = "5s"

[build]
  dockerfile = "Dockerfile"

[env]
  MOVE_TIME_MS = "15000"

[processes]
  tournament = "python -m tournament --host 0.0.0.0 --port 8080 --seats 6 --starting-stack 10000 --sb 50 --bb 100 --move-time $MOVE_TIME_MS"

[checks]
  [checks.websocket]
    type = "tcp"
    port = 8080
    interval = "15s"
    timeout = "2s"
    grace_period = "5s"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true
  min_machines = 1
  max_machines = 1
  processes = ["tournament"]

  [http_service.concurrency]
    type = "connections"
    soft_limit = 30
    hard_limit = 40

[vm]
  size = "shared-cpu-1x"
  memory = 512
